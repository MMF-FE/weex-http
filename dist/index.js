module.exports=function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),i=weex.requireModule("stream"),r=["GET","DELETE","HEAD","POST","PUT","PATCH"],s=["POST","PUT","PATCH"],u=function(){function t(t){this.options=n.setOptonsDefault(t,{timeout:1e4,headers:{},baseURL:"",method:"GET",data:{},url:"/",progress:function(){}})}return t.prototype.buildHeaders=function(){this.headers=n.setOptonsDefault(this.options.headers,{"Content-Type":"application/x-www-form-urlencoded"})},t.prototype.buildMethod=function(){var t=String(this.options.method).trim().toLocaleUpperCase();if(r.indexOf(t)===-1)throw new Error(t+" not in "+r.join(", "));this.method=t},t.prototype.buildUrl=function(t){return(t.hasOwnProperty("baseURL")?t.baseURL:this.options.baseURL)+this.options.url},t.prototype.buildData=function(){var t=n.param(this.options.data);return t},t.prototype.send=function(t){var e=this;this.buildHeaders(),this.buildMethod();var o=t.hasOwnProperty("timeout")?t.timeout:this.options.timeout,n=this.method,r=this.buildData(),u=this.buildUrl(t),a=JSON.parse(JSON.stringify(this.headers));if(t.headers&&Object.keys(t.headers).forEach(function(e){a[e]=t.headers[e]}),s.indexOf(this.method.toLocaleUpperCase())===-1){var d=u.indexOf("?")===-1?"?":"&";u+=d+r,r=""}return new Promise(function(t,s){var d=!1,c=setTimeout(function(){d=!0,s({status:0,ok:!1,statusText:"TIMEOUT",data:"TIMEOUT",headers:{}})},o);i.fetch({method:n,body:r,url:u,headers:a,type:"text"},function(e){d||(clearTimeout(c),e.ok?t(e):s(e))},function(t){e.options.progress(t)})})},Object.defineProperty(t,"config",{get:function(){return this._config},set:function(t){var e=this;Object.keys(t).forEach(function(o){e._config[o]=t[o],e._instance&&(e._instance.options[o]=t[o])})},enumerable:!0,configurable:!0}),t.buildMethod=function(t,e,o,n,i){return void 0===o&&(o={}),void 0===n&&(n={}),i||(this._instance||(this._instance=new this(this.config)),i=this._instance),i.options.method=t,i.options.data=o,i.options.url=e,i.send(n)},t.create=function(t){var e=this;void 0===t&&(t={});var o=new this(t),n={instance:o};return r.forEach(function(t){n[t.toLocaleLowerCase()]=function(n,i,r){return void 0===i&&(i={}),e.buildMethod(t,n,i,r,o)}}),n},t.get=function(t,e,o){return void 0===e&&(e={}),this.buildMethod("GET",t,e,o)},t.post=function(t,e,o){return void 0===e&&(e={}),this.buildMethod("POST",t,e,o)},t.delete=function(t,e,o){return void 0===e&&(e={}),this.buildMethod("DELETE",t,e,o)},t.head=function(t,e,o){return void 0===e&&(e={}),this.buildMethod("HEAD",t,e,o)},t.put=function(t,e,o){return void 0===e&&(e={}),this.buildMethod("PUT",t,e,o)},t.patch=function(t,e,o){return void 0===e&&(e={}),this.buildMethod("PATCH",t,e,o)},t}();u._config={timeout:1e4,baseURL:"",headers:{}},e.default=u},function(t,e){"use strict";function o(t,e,n){var i;if(Array.isArray(e))e.forEach(function(e,i){s.test(t)?n(t,e):o(t+"["+("object"==typeof e&&null!=e?i:"")+"]",e,n)});else if("object"==typeof e)for(i in e)o(t+"["+i+"]",e[i],n);else n(t,e)}function n(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(e).forEach(function(o){t.hasOwnProperty(o)||(t[o]=e[o])}),t}function i(t){return!!(t&&t.constructor&&t.call&&t.apply)}function r(t){void 0===t&&(t={});var e,n=[],r=function(t,e){var o=i(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==o?"":o)};for(e in t)o(e,t[e],r);return n.join("&")}Object.defineProperty(e,"__esModule",{value:!0});var s=/\[\]$/;e.setOptonsDefault=n,e.isFunction=i,e.param=r}]);
//# sourceMappingURL=index.js.map